{"version":3,"file":"sprite.min.js","sources":["sprite.js"],"names":["SpriteMap","src","animations","options","origPIC","postInitCallback","t","this","sprite","baseImage","image","cachedImages","00","maps","name","hasOwnProperty","set","apply","arguments","Sprite","spriteMap","prototype","Array","startRow","startCol","endRow","endCol","squeeze","flipped","rows","cols","horizontal","vertical","f","key","_prerender","unset","use","restartIfInUse","activeLoop","m","setLoop","start","startLoop","stop","reset","runOnce","callback","runLoop","draw","ctx","x","y","w","h","clone","sourceFile","call","cachedImage","getImageFromCache","_init","Image","onload","_src","saveImageToCache","HTMLImageElement","complete","width","height","o","HTMLCanvasElement","img","frameW","frameH","projectedW","projectedH","Math","floor","row","col","frame","interval","useTimer","advanceFramesManually","lastFrameUpdateTime","_runOnce","numFrames","getNumFrames","tempCanvas","document","createElement","tempContext","getContext","translate","scale","drawImage","save","xOffset","yOffset","restore","e","console","error","Date","now","nextFrame","changeFrame","delta","setFrame","props","frameNumberToRowCol","stopLoop","intervalID","setInterval","clearInterval","runLoopCallback","shift","prevFrame","getFrame","images","preloadImages","files","l","length","notifyLoaded","itemCallback","finishCallback","pop","_num"],"mappings":"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"}